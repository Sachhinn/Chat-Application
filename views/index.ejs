<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home - Konnekt</title>
    <link rel="stylesheet" href="/css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>

    <div class="chat-app-container">
        <aside class="sidebar">
            <div class="profile-section">
                <div class="profile-avatar-large">
                    <img src="
                        <% if (user.profilePicUrl) { %>
                         <%= user.profilePicUrl %>
                        <% } else { %>
                        https://placehold.co/100x100/3c006b/FFFFFF?text=<%= user.firstName.charAt(0) + user.lastName.charAt(0) %>
                        <% } %>
                    " alt="<%= user.firstname %> Profile">
                    </div>
                <h3 class="username"> <%= (user.firstName) %> <%= user.lastName %></h3>
            </div>
            <nav class="main-nav">
                <a id="nav-item-messages" class="nav-item active">
                    <i class="fas fa-comment"></i>
                    <span>Messages</span>
                </a>
                <a id="nav-item-contacts"   class="nav-item">
                    <i class="fas fa-users"></i>
                    <span>Contacts</span>
                </a>
                <a  id="nav-item-profile" class="nav-item">
                    <i class="fas fa-user-circle"></i>
                    <span>Profile</span>
                </a>
                </nav>
        </aside>

        <section class="chat-list-panel">
            <div class="chat-list-header">
                <h2>Messages</h2>
                <label id="search-checkbox-label" for="search-checkbox"><i class="fas fa-plus-square"></i></label>
            </div>
            <div class="chat-list-scroll">
                <input type="checkbox" name="search-checkbox" id="search-checkbox">
                <div class="chat-list-search-panel">
                   <input type="text" placeholder="Username" class="message-input" name="" id="search-input">
                   <button id="search-button" class="send-button">
                    <i class="fa-solid fa-magnifying-glass"></i>
                </button>
                <div class="search-list">
                </div>
                </div>
                
            </div>
        </section>

        <main class="chat-main">
            <div id="chat-main-header" class="chat-main-header">
                <button id="back-button" class="back-button">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div id="chat-avatar-main" class="chat-avatar chat-avatar-main">
                    <img src="https://placehold.co/50x50/3c006b/FFFFFF?text=SS" alt="User Avatar">
                </div>
                <span id="chat-name-main" class="chat-name-main">Konnekt</span>
                <span id="chat-status-main" class="chat-status-main"></span>
                <div class="chat-main-actions">
                    <i class="fas fa-video"></i>
                    <i class="fas fa-phone"></i>
                </div>
            </div>

            <div id="messages-area" class="messages-area">
                
            </div>

            <div class="chat-input-area">
                <input type="text" placeholder="Send message.." class="message-input" id="message-input">
                <button id="sendMessage" class="send-button">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </main>

        <section id="user-profile" class="user-profile">
            <div class="user-profile-header">
                <button onclick="history.back()" id="back-button" class="back-button">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <button onclick="toggleProfile()"  id="close-button" class="close-button">
                    <i class="fa-solid fa-xmark"></i>
                </button>
                <span>Profile</span>
            </div>
            <div class="user-avatar profile-avatar-large">
                <img src="
                <% if (user.profilePicUrl) { %>
                         <%= user.profilePicUrl %>
                        <% } else { %>
                        https://placehold.co/200x200/3c006b/FFFFFF?text=<%= user.firstName.charAt(0) + user.lastName.charAt(0) %>
                        <% } %>
                " alt="<%= user.firstName %>'s Profile">
            </div>
            <div class="user-profile-info user-name">
                <i class="user-profile-icon fa-solid fa-face-smile"></i>
                <div>
                    <div><strong>Name</strong></div>
                    <span><%= user.firstName%></span>
                    <span><%= user.lastName%></span>
                </div>
            </div>
            <div class="user-profile-info user-username">
                <i class="user-profile-icon fa-solid fa-user"></i>
                <div>
                    <div><strong>Username</strong></div>
                    <span><%= user.username %></span>

                </div>
            </div>
            <div class="user-profile-info user-bio">
                <i class="user-profile-icon fa-solid fa-quote-right"></i>
                <div>
                    <div><strong>Bio</strong></div>
                    <span><%= user.bio %></span>
                </div>
            </div>

            <div class="logout-button-container">
                <button onclick="window.location.href='/login'" id="logout-button" class="logout-button">
                    <i class="fas fa-sign-out-alt"></i>
                    <strong>Logout</strong>
                </button>

            </div>
        </section>
    </div>
    <script>
        const user = <%- JSON.stringify(user) -%>;
        let contacts = <%- JSON.stringify(contacts) -%>;
        let conversations = <%- JSON.stringify(conversations) -%>;
    </script>
<script src="/index.js"></script>
</body>
</html>